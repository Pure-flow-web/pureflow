{
  "entities": {
    "Task": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Task",
      "type": "object",
      "description": "Represents a task in the PureFlow application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Task entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N Task)"
        },
        "title": {
          "type": "string",
          "description": "The title of the task."
        },
        "note": {
          "type": "string",
          "description": "A note associated with the task."
        },
        "priority": {
          "type": "string",
          "description": "The priority of the task (Low, Med, High)."
        },
        "dueDate": {
          "type": "string",
          "description": "The due date of the task.",
          "format": "date-time"
        },
        "completed": {
          "type": "boolean",
          "description": "Indicates whether the task is completed."
        }
      },
      "required": [
        "id",
        "userId",
        "title",
        "priority",
        "dueDate",
        "completed"
      ]
    },
    "Note": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Note",
      "type": "object",
      "description": "Represents a note in the PureFlow application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Note entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N Note)"
        },
        "content": {
          "type": "string",
          "description": "The content of the note."
        },
        "lastEdited": {
          "type": "string",
          "description": "The timestamp of the last edit to the note.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "userId",
        "content",
        "lastEdited"
      ]
    },
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the PureFlow application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the User entity.  This corresponds to the Firebase Auth UID."
        },
        "email": {
          "type": "string",
          "description": "The user's email address.",
          "format": "email"
        },
        "name": {
          "type": "string",
          "description": "The user's display name."
        }
      },
      "required": [
        "id",
        "email",
        "name"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user profiles, indexed by Firebase Auth UID.",
          "params": [
            {
              "name": "userId",
              "description": "The Firebase Auth UID of the user."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/tasks/{taskId}",
        "definition": {
          "entityName": "Task",
          "schema": {
            "$ref": "#/backend/entities/Task"
          },
          "description": "Stores tasks owned by a specific user. Path-based ownership.",
          "params": [
            {
              "name": "userId",
              "description": "The Firebase Auth UID of the user."
            },
            {
              "name": "taskId",
              "description": "The unique identifier for the task."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/notes/{noteId}",
        "definition": {
          "entityName": "Note",
          "schema": {
            "$ref": "#/backend/entities/Note"
          },
          "description": "Stores notes owned by a specific user. Path-based ownership.",
          "params": [
            {
              "name": "userId",
              "description": "The Firebase Auth UID of the user."
            },
            {
              "name": "noteId",
              "description": "The unique identifier for the note."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to be secure, scalable, and easily debuggable, following the core design principles and strategy mandates. The primary strategy is Authorization Independence via Denormalization to avoid hierarchical authorization dependencies and enable atomic operations. Structural Segregation ensures that all documents in a collection share the same security requirements, and Access Modeling uses consistent patterns for authorization.\n\nThe `/users/{userId}` collection stores user profiles.  Subcollections `/users/{userId}/tasks` and `/users/{userId}/notes` store tasks and notes respectively. This path-based ownership simplifies security rules and efficiently manages user-owned data.  The structure supports the required QAPs by segregating data based on ownership, making list operations secure. There is no need for a membership map since this app is for a single user, and data is segregated by user ID."
  }
}